{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap_tags %}
{% block title %}{{ service.name }} - ConorCreates{% endblock title %}
{% block stripeJS %}
<script src="https://js.stripe.com/v2/"></script>
<script>
    //<![CDATA[
    Stripe.publishableKey = '{{ publishable }}';
    //]]
</script>
<script src="{% static 'js/stripe.js' %}"></script>
{% endblock stripeJS %}
{% block content %}

<div class="row">
    <div class="col">
        <img class="img-fluid" src="{{ service.main_image.url }}" alt="{{ service.name }}">
        <!-- <div class="service-title" style = "background-position: center center; background-image: url('{{ MEDIA_URL }}{{ service.main_image }}')"></div> -->
    </div>
</div>
<div class="row">
    <div class="col">
        <h1><i class="{{service.short}}"></i>{{ service.name }} - â‚¬{{ service.price }}</h1>
    </div>
</div>
<div class="row">
    <div class="col">
        <p class="">{{ service.description }}</p>
    </div>
</div>

{% if not user.is_authenticated %}
<div class="row">
    <div class="col">
            <div class="alert alert-dismissible alert-success">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    You need to be logged in to purchase {{ service.name }} - <a href="{% url 'login' %}" class="alert-link">Login</a> or <a href="{% url 'register' %}" class="alert-link">Register</a> .
                  </div>
    </div>
</div>
{%else%}
<div class="row">
    <form method="POST" role="form" action="{% url 'single-service' service.id %}" id="payment-form">
        {% csrf_token %}
        <legend>Payment</legend>
        <div class="credit-card-errors" style="display:none">
            <div class="alert-message block-message error" id="stripe-error-message"></div>
        </div>
        <div class="row">
            <div class="form-group col-md-6">
                {{order_form|as_bootstrap}}
            </div>
            <div class="form-group col-md-6">
                {{payment_form|as_bootstrap}}
            </div>
    
    
            <div class="form-group col-md-12">
                <input class="btn btn-primary" id="submit_payment_btn" name="commit" type="submit" value="Submit">
            </div>
        </div>
    </form>
</div>

{% endif %}

<div class="row mt-4">
    <div class="col">
        <h4>Previous {{ service.name }} work</h4>
    </div>
    <div class="col">
        <div class="home-slider mb-4">
            {% for img in images %}
            <div><img class="img-fluid" src="{{ img.add_image.url}}" alt="{{ service.name }}"></div>

            {% endfor %}
            <!-- <div class="slide"><img src= alt=""><div class="slide-caption">Logo Design</div></div> -->


        </div>
    </div>
</div>
{% endblock %}

{% block slickJS %}
<!-- Slick JS -->
<script type="text/javascript" src="{% static 'slick/slick.js' %}"></script>
<script src="{% static 'js/slider.js' %}"></script>
{% endblock slickJS %}